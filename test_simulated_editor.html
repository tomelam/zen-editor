<!DOCTYPE html>
<html lang='en'>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>Dialog Widget Tests</title>

    <style type="text/css">
        @import "dojo/dijit/themes/claro/document.css";
        @import "dojo/dijit/tests/css/dijitTests.css";
        @import "dojo/dijit/themes/claro/claro.css";
        @import "dojo/dojox/mobile/themes/common/dijit/dijit.css";
    </style>

	<style type="text/css">
		form { margin-bottom : 0; }
		table { border: none; }
		#dialog3_underlay { background-color: #027 }
		#fifthDlg_underlay { background-color: yellow; }
	</style>

        <script type="text/javascript" src="dojo/dojo/dojo.js"></script>

	<script type="text/javascript">
		require([
			"dojo/_base/lang",
			"dojo/date/stamp",
			"dojo/dom",
			"dojo/parser",
			"dijit/registry",
			"dijit/Dialog",

			// used by parser
			"dijit/Editor",
			"dijit/_editor/plugins/AlwaysShowToolbar",
			"dijit/InlineEditBox",
			"dijit/Menu",
			"dijit/MenuItem",
			"dijit/MenuSeparator",
			"dijit/form/Button",
			"dijit/form/TextBox",
			"dijit/form/DateTextBox",
			"dijit/form/TimeTextBox",
			"dijit/form/FilteringSelect",
			"dijit/layout/BorderContainer",
			"dijit/layout/ContentPane",
			"dijit/layout/TabContainer",

			"dojo/domReady!"
		], function(lang, stamp, dom, parser, registry, Dialog){

			var thirdDlg;
			createDialog = function(){
				if(!thirdDlg){
					var pane = dom.byId('thirdDialog');
					// should specify a width on dialogs with <p> tags, otherwise they get too wide
					thirdDlg = new dijit.Dialog({
						id: "dialog3",
						title: "Programmatic Dialog Creation",
						style: {width: '300px'}
					},pane);
				}
				setTimeout(function(){ thirdDlg.show(); },"3000");
			};

			open2Dialogs = function (){
				registry.byId('dialog1').show();
				setTimeout(lang.hitch(registry.byId('fifthDlg'), 'show'), 1000);
			};

			showSelfDestructDlg = function(){
				//for testing #12436
				var dlg = new Dialog({
					id: 'SelfDestructDlg',
					title: 'Self-Destruct Dialog',
					content: 'This dialog will destroy itself onHide.<br/><input type="text" id="SelfDestructDlgInput" />',
					onHide: function(){
						// Use setTimeout() to avoid memory leak warning for sIEve
						setTimeout(function(){
							dlg.destroyRecursive();
						}, 0);
					}
				});
				dlg.show();
			};

			parser.parse();
		});
	</script>
</head>
<body class="claro" role="main">

	<script type="dojo/require">
		dom: "dojo/dom",
		registry: "dijit/registry"
	</script>

	<h2>Simulated Editor with Dialog:</h2>
	<div id="editorDialog" data-dojo-type="dijit/Dialog" title="Insert Text" data-dojo-props="refocus: false">
		<script type="dojo/method" data-dojo-event="execute">
			var editor = dom.byId("editor"), newVal = dom.byId("dialogTextarea").value;
			console.log("focusing editor and setting value to " + newVal);
			editor.focus();
			editor.value = newVal;
		</script>
		<p>
			Enter text then hit OK.
			Focus will be shifted to "editor" below and text will be inserted.
		</p>
		<textarea id="dialogTextarea" style="width: 90%" placeholder="enter text here"></textarea>
		<br>
		<button data-dojo-type="dijit/form/Button" type="submit">OK</button>
	</div>
	<div style="background-color: #eee; border: solid gray 1px; width: 90%;">
		<button id="insertTextButton" onclick="registry.byId('editorDialog').show();">insert text</button>
	</div>
	<textarea id="editor" style="width: 90%; border: solid gray 1px; border-top: none;">
		The button above will open a Dialog to reset the text in this textarea.
	</textarea>
</body>
</html>
